# Compliance and Legal Governance Profile for EJE
# Optimized for regulatory compliance and legal decision-making
# Emphasizes statutory adherence, precedent-based reasoning, and audit trails

profile_name: "compliance_legal"
version: "1.0.0"
description: "Governance profile for compliance and legal use cases with statutory focus"

# Critic Configuration - Legal Focus
critics:
  - name: "legal"
    module: "src.ejc.critics.legal_critic"
    class: "LegalCritic"
    priority: 1  # Highest priority - legal requirements are mandatory
    weight: 2.5  # Dominant weight for legal compliance
    focus:
      - statutory_compliance
      - regulatory_requirements
      - contractual_obligations
      - liability_assessment
      
  - name: "precedent"
    module: "src.ejc.critics.precedent_critic"
    class: "PrecedentCritic"
    priority: 1  # Equal priority - precedent is core to legal reasoning
    weight: 2.0  # Heavy weight for case law and analogous situations
    statutory_weighting: 2.5  # Extra weight for statutory precedents
    domain_filter: "legal"
    
  - name: "rights"
    module: "src.ejc.critics.rights_critic"
    class: "RightsCritic"
    priority: 2
    weight: 1.5  # Important but subordinate to explicit legal requirements
    focus:
      - legal_rights
      - due_process
      - constitutional_protections
      
  - name: "transparency"
    module: "src.ejc.critics.transparency_critic"
    class: "TransparencyCritic"
    priority: 3
    weight: 1.3  # Documentation and explainability for legal defensibility
    
  - name: "pragmatics"
    module: "src.ejc.critics.pragmatics_critic"
    class: "PragmaticsCritic"
    priority: 4
    weight: 0.8  # Lower weight - practical concerns subordinate to legal requirements

# Legal Framework Configuration
legal_framework:
  hierarchy:
    constitutional:
      weight: 3.0
      override_authority: true
      examples:
        - constitutional_rights
        - fundamental_freedoms
        - supreme_court_precedents
        
    statutory:
      weight: 2.5
      examples:
        - federal_statutes
        - state_laws
        - regulations
        - codes
        
    regulatory:
      weight: 2.0
      examples:
        - agency_rules
        - industry_standards
        - compliance_frameworks
        
    case_law:
      weight: 1.8
      binding_precedent_weight: 2.5
      persuasive_precedent_weight: 1.5
      
    contractual:
      weight: 1.5
      examples:
        - terms_of_service
        - user_agreements
        - slas
        
  jurisdictional_scope:
    primary: "federal"
    secondary:
      - state
      - international_treaties
    conflict_resolution: "most_restrictive"

# Policy Rules - Regulatory Compliance
policy_rules:
  # Statutory Compliance
  - name: "statutory_compliance_mandatory"
    description: "All decisions must comply with applicable statutes"
    severity: "critical"
    scope:
      - federal_law
      - state_law
      - local_ordinances
    action: "block"
    override_authority: "legal_counsel_only"
    
  - name: "regulatory_requirement_check"
    description: "Verify compliance with relevant regulatory requirements"
    severity: "critical"
    frameworks:
      - gdpr
      - ccpa
      - hipaa
      - sox
      - finra
      - fcc
      - sec
    action: "review"
    
  # Due Process
  - name: "due_process_protection"
    description: "Ensure procedural fairness and due process rights"
    severity: "high"
    requirements:
      - notice_provided
      - opportunity_to_respond
      - neutral_decision_maker
      - reasoned_decision
      - appeal_mechanism
    action: "review"
    
  # Audit Trail
  - name: "audit_trail_complete"
    description: "Maintain complete audit trail for legal defensibility"
    severity: "high"
    requirements:
      - decision_documented
      - rationale_recorded
      - evidence_preserved
      - timeline_tracked
      - actors_identified
    action: "log"
    
  # Liability Assessment
  - name: "liability_exposure_analysis"
    description: "Assess potential legal liability exposure"
    severity: "high"
    factors:
      - negligence_risk
      - contractual_breach
      - statutory_violation
      - damages_potential
    thresholds:
      high_risk: 0.7
      moderate_risk: 0.4
    action: "review"
    
  # Data Protection
  - name: "data_protection_compliance"
    description: "Ensure compliance with data protection laws"
    severity: "critical"
    regulations:
      - gdpr_article_6_lawful_basis
      - gdpr_article_17_erasure
      - ccpa_consumer_rights
      - data_minimization
      - purpose_limitation
    action: "review"
    
  # Contractual Obligations
  - name: "contractual_compliance"
    description: "Verify adherence to contractual obligations"
    severity: "high"
    check_items:
      - terms_of_service
      - sla_commitments
      - licensing_agreements
      - user_agreements
    action: "review"
    
  # Industry Standards
  - name: "industry_standard_adherence"
    description: "Follow applicable industry standards and best practices"
    severity: "moderate"
    standards:
      - iso_27001
      - pci_dss
      - nist_framework
      - owasp_top_10
    action: "warn"

# Precedent Weighting System
precedent_analysis:
  enabled: true
  
  precedent_types:
    statutory_interpretation:
      weight: 2.5
      description: "Cases interpreting relevant statutes"
      binding_multiplier: 1.5
      
    regulatory_guidance:
      weight: 2.0
      description: "Agency interpretations and guidance"
      
    case_law_binding:
      weight: 2.2
      description: "Binding precedent from controlling jurisdiction"
      same_jurisdiction: 2.5
      higher_court: 3.0
      
    case_law_persuasive:
      weight: 1.5
      description: "Persuasive precedent from other jurisdictions"
      
    analogous_facts:
      weight: 1.8
      description: "Cases with similar fact patterns"
      similarity_threshold: 0.75
      
  similarity_calculation:
    factual_similarity: 0.4
    legal_issue_similarity: 0.35
    jurisdictional_relevance: 0.15
    recency: 0.10
    
  overruling_detection:
    enabled: true
    check_superseded: true
    check_distinguished: true

# Regulatory Compliance Frameworks
compliance_frameworks:
  gdpr:
    enabled: true
    key_requirements:
      - lawful_basis_article_6
      - consent_article_7
      - data_subject_rights_chapter_3
      - data_protection_by_design_article_25
      - dpia_article_35
    penalties:
      tier_1: "2% revenue or €10M"
      tier_2: "4% revenue or €20M"
      
  ccpa:
    enabled: true
    key_requirements:
      - right_to_know
      - right_to_delete
      - right_to_opt_out
      - non_discrimination
    penalties: "$2,500 per violation, $7,500 if intentional"
    
  hipaa:
    enabled: false  # Enable if healthcare data involved
    key_requirements:
      - privacy_rule
      - security_rule
      - breach_notification
      
  sox:
    enabled: false  # Enable for public companies
    key_requirements:
      - financial_controls
      - audit_independence
      - whistleblower_protection
      
  pci_dss:
    enabled: false  # Enable if handling payment cards
    key_requirements:
      - secure_network
      - cardholder_data_protection
      - vulnerability_management
      - access_control

# Precedent Templates - Legal Cases
precedent_templates:
  - template_id: "statutory_interpretation"
    category: "legal_analysis"
    required_fields:
      - statute_cited
      - statutory_language
      - interpretation_issue
      - legislative_intent
      - applicable_precedents
      - reasoning
      - holding
    similarity_weight: 2.5
    
  - template_id: "regulatory_compliance"
    category: "compliance"
    required_fields:
      - regulation_reference
      - compliance_requirement
      - evidence_of_compliance
      - gaps_identified
      - remediation_plan
      - verification_method
    similarity_weight: 2.0
    
  - template_id: "contractual_dispute"
    category: "contracts"
    required_fields:
      - contract_provisions
      - interpretation_issue
      - party_obligations
      - breach_analysis
      - damages_assessment
      - resolution
    similarity_weight: 1.8
    
  - template_id: "liability_assessment"
    category: "risk"
    required_fields:
      - duty_of_care
      - breach_analysis
      - causation
      - damages
      - defenses_available
      - risk_level
    similarity_weight: 1.7
    
  - template_id: "data_protection_decision"
    category: "privacy"
    required_fields:
      - data_category
      - lawful_basis
      - processing_purpose
      - subject_rights
      - safeguards_applied
      - dpia_required
    similarity_weight: 2.2

# Decision Thresholds - Strict for Legal Compliance
thresholds:
  block_threshold: 0.30  # Very low - block on any significant legal concern
  review_threshold: 0.20  # Trigger legal review frequently
  ambiguity_threshold: 0.10  # Flag even minimal legal ambiguity

# Governance Settings
governance:
  moral_mode: "legalist"  # Rule-based, precedent-focused
  
  require_legal_review:
    - statutory_violation_flagged
    - regulatory_noncompliance
    - high_liability_risk
    - novel_legal_issue
    - conflicting_precedents
    - cross_jurisdictional_issue
    
  escalation_path:
    - compliance_officer
    - legal_counsel
    - general_counsel
    - external_counsel  # For high-stakes matters
    
  audit_requirements:
    log_all_decisions: true
    preserve_evidence: true
    retention_period: "7_years"  # Standard legal retention
    tamper_evident: true
    chain_of_custody: true
    
  documentation_standards:
    rationale_required: true
    citation_format: "bluebook"
    evidence_indexed: true
    contemporaneous_notes: true

# Reporting and Compliance Monitoring
reporting:
  required_metrics:
    - compliance_rate_by_framework
    - violations_by_severity
    - legal_review_frequency
    - precedent_reliance_rate
    - liability_exposure_trends
    - audit_findings
    
  compliance_dashboards:
    - regulatory_status
    - open_legal_issues
    - risk_heat_map
    - precedent_coverage
    
  alert_conditions:
    - statutory_violation_detected
    - regulatory_deadline_approaching
    - high_liability_risk
    - precedent_overruled
    - jurisdiction_conflict
    - audit_failure
    
  mandatory_reporting:
    - material_violations
    - data_breaches
    - regulatory_inquiries
    - litigation_risk
    
  reporting_frequency:
    executive_summary: "monthly"
    detailed_compliance: "quarterly"
    board_report: "annual"
    incident_report: "immediate"
